<!DOCTYPE html>
<html lang="en"><head>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.4.555">

  <meta name="author" content="Jay Paul Morgan">
  <title>Jay Paul Morgan - Linux &amp; Supercomputer</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/theme/quarto.css">
  <link href="../../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
<meta property="og:title" content="Jay Paul Morgan - Linux &amp; Supercomputer">
<meta property="og:description" content="Lecture 7">
<meta property="og:site_name" content="Jay Paul Morgan">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Linux &amp; Supercomputer</h1>
  <p class="subtitle">Lecture 7</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Jay Paul Morgan 
</div>
</div>
</div>

</section>
<section>
<section id="linux" class="title-slide slide level1 center">
<h1>Linux</h1>

</section>
<section id="what-is-linux" class="slide level2">
<h2>What is Linux?</h2>
<ul>
<li>Linux is a popular operating system (OS) like Windows, or MacOS.</li>
<li>Unlike these other two OSs, Linux is open source, which means the source code is freely available to look at and modify.</li>
<li>As its open source, its very possible for anyone to build their <em>own</em> version of Linux or build on top of Linux to create their own <em>Distribution</em> of Linux.</li>
</ul>
</section>
<section id="whats-a-distribution" class="slide level2">
<h2>What’s a Distribution?</h2>
<p>A distribution can be considered like a <em>flavour</em> or version of Linux. There are many popular flavours that attempt to meet different needs from different users. For example:</p>
<ul>
<li>Ubuntu – typically the first Linux experience people will have. Attempts to be very user friendly.</li>
<li>Fedora – stable and secure distribution while also providing up-to-date packages.</li>
<li>Arch Linux – strong focus on customisability rather than user friendliness with bleeding edge packages.</li>
</ul>

<img data-src="images/family-tree.png" class="r-stretch"></section>
<section id="defining-traits-of-linux" class="slide level2">
<h2>Defining Traits of Linux</h2>
<p>While we have said that Linux is open source, there are many other traits that make it stand out from other operating systems:</p>
<ul>
<li>Complete control of how the system operates.</li>
<li>The level of flexibility and automation that you can get from using the Linux command line.</li>
</ul>
<p>While there are many other traits, these two are going to be what we’re going to focus on.</p>
</section></section>
<section>
<section id="the-command-line" class="title-slide slide level1 center">
<h1>The command line</h1>

</section>
<section id="whats-a-command" class="slide level2">
<h2>What’s a command?</h2>
<p>While many recent versions of Linux makes things more accessible via GUIs, they will never be a substitute for using the command line. We’re going to learn how to control the system via the command line, via a <strong>shell</strong>. A shell, like the Python REPL we’ve already seen, is waits for you to input commands, executes the command, and prints the output if there is output to print.</p>
<p>A Linux command is a call to a program optionally followed by some arguments. For example, if we want list out the files and folders in the directory, we would use the <code>ls</code> (list) command:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a></a><span class="fu">ls</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The <code>ls</code> command comes with a number of optional flags and arguments that we can add onto the call. When calling a command a flag is something that begins with a <code>-</code> , for example <code>-l</code> tells <code>ls</code> to list the directory in a list format.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a></a><span class="fu">ls</span> <span class="at">-l</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We have supplied the <code>-l</code> flag. There are many other flags for <code>ls</code>, like for example, the human readable file systems with <code>-h</code> or show hidden files (files that start with a period) with <code>-a</code>.</p>
<p>When we’re using multiple flags we could write</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a></a><span class="fu">ls</span> <span class="at">-l</span> <span class="at">-h</span> <span class="at">-a</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Or:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a></a><span class="fu">ls</span> <span class="at">-lha</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Sometimes commands take optional positional arguments. Going back to our list directory command, where, by default, it will list the current directory. But instead we can tell the command to list a particular directory by supplying the path as an argument</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a></a><span class="fu">ls</span> images/ <span class="at">-lha</span></span>
<span id="cb5-2"><a></a><span class="co"># or ls -lha images/ works too</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>How do I know how to use a command? Well that’s where another command comes in. It’s called <code>man</code> (short for manual). If you pass another command to the <code>man</code> command, the documentation will be shown in the terminal, e.g.:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a></a><span class="fu">man</span> ls  <span class="co"># display the documentation for ls</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The documentation should list all the different flags and arguments, describe what they mean, and sometimes give example or most common usage of a command.</p>
<p>When the ‘man page’ is display, you can scroll up and down the page using your arrow keys, and page-up and page-down. When you’re done reading, just hit the ‘q’ character</p>
<p>I am going to go through some of the most common commands just to make sure that you’re familiar with the typical usage.</p>
</section>
<section id="cd" class="slide level2">
<h2>cd</h2>
<p>We’ve already seen <code>ls</code> to list a directory. The command to move to a directory is <code>cd</code> (change directory), that takes an argument of filepath to move to:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a></a><span class="bu">cd</span> ~ <span class="co"># tilde is short-hand for the 'home directory'</span></span>
<span id="cb7-2"><a></a><span class="bu">cd</span> ~/Documents/My\ Files  <span class="co"># go to Documents and then to "My Files"</span></span>
<span id="cb7-3"><a></a><span class="bu">cd</span>   <span class="co"># no argument, by default goes to the home directory</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="mkdir" class="slide level2">
<h2>mkdir</h2>
<p>Sticking with the them of directories, to make a new directory we use <code>mkdir</code>, whose argument takes the name of the directory we want to create:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a></a><span class="fu">mkdir</span> my_new_directory</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can create a many level nested directory structure all at once using the <code>-p</code> (parents) flag, that tells <code>mkdir</code> if the parent directory of the target directory doesn’t exist, create it.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a></a><span class="fu">mkdir</span> photos/2020/01/05  <span class="co"># won't work unless photos/2020/01 exist</span></span>
<span id="cb9-2"><a></a><span class="fu">mkdir</span> <span class="at">-p</span> photos/2020/01/05  <span class="co"># this will work</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="cp" class="slide level2">
<h2>cp</h2>
<p>To copy a file or directory, we can use the <code>cp</code> command. Here we are copying a file, where the first argument is the filepath of the file you want to copy and the second argument is the filepath where the copy should be placed.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a></a><span class="fu">cp</span> my_old_file my_new_file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>By default (without a flag), <code>cp</code> will not work with directories, for that you have to use the <code>-r</code> (recursive) flag</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a></a><span class="fu">cp</span> <span class="at">-r</span> data/ data-backup</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="mv" class="slide level2">
<h2>mv</h2>
<p>The syntax of moving a file is similar to that of <code>cp</code>:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a></a><span class="fu">mv</span> old_file new_file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Except that it works for both files and directories without any flags. <code>mv</code> can also be used to <strong>rename</strong> files, that’s all renaming is: moving a file to the same directory under a different name.</p>
</section>
<section id="rm" class="slide level2">
<h2>rm</h2>
<p>To remove a file us <code>rm</code>:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a></a><span class="fu">rm</span> file_to_delete</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you want to delete a directory, use the <code>-r</code> (recursive) flag:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a></a><span class="fu">rm</span> <span class="at">-r</span> directory_to_delete/</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="cat" class="slide level2">
<h2>cat</h2>
<p><code>cat</code> stands for concatenate, i.e.&nbsp;concatenating the contents of two or more files:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a></a><span class="fu">cat</span> file1 file2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The result is that the concatenation of these two files will be printed to the screen. If you wanted to put the result into its own file you would redirect the output using <code>&gt;</code></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><a></a><span class="fu">cat</span> file1 file2 <span class="op">&gt;</span> newfile</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Since cat reads the file and prints it to screen it is a very handy way to view the contents of a file, even if it was not intended for that.</p>
</section>
<section id="pwd" class="slide level2">
<h2>pwd</h2>
<p>Sometimes you may get lost when moving directories. <code>pwd</code> prints the current working directory from the root directory, i.e.&nbsp;the path that is printed is an absolute path.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><a></a><span class="bu">pwd</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="find" class="slide level2">
<h2>find</h2>
<p>If we want to list all files of a certain type, we can use the wildcard <code>*</code> that we’ve seen before:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><a></a><span class="fu">ls</span> <span class="pp">*</span>.jpg <span class="co"># list all files that end with .jpg</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>However, this will only list for the current directory. Perhaps the better way to find files will be using the <code>find</code> command:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><a></a><span class="fu">find</span> . <span class="at">-type</span> f <span class="at">-name</span> <span class="pp">*</span>.jpg</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The first argument is the directory to start the search, then we define the type <code>f</code> being files, and then specify the name. Find will recursively search through directories and sub-directories to find all files that match that name.</p>
</section>
<section id="grep" class="slide level2">
<h2>grep</h2>
<p>How about if we want to find files that have a certain contents? For that we can use <code>grep</code>. Grep will read a file and print (by default) the lines that contains your pattern. i.e.:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><a></a><span class="fu">grep</span> <span class="st">'Linux'</span> lecture.org</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This will print the lines that contain the word Linux in lecture.org. If we just want the matched value, we use the <code>-o</code> flag.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><a></a><span class="fu">grep</span> <span class="at">-o</span> <span class="st">'[0-9]'</span> lecture.org</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This prints all occurrences of numbers in lecture.org</p>
</section>
<section id="lessheadtail" class="slide level2">
<h2>less/head/tail</h2>
<p>If a file is very long, we may not want to read the file using cat, as it will have to print the entire file. Instead we could use <code>less</code>, which will allow us to navigate through the file, using arrow keys to move and <code>q</code> to quit.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><a></a><span class="fu">less</span> filename</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If we just want to view the first few lines, or the last few lines of a file we can use head/tail, respectively:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb23-1"><a></a><span class="fu">head</span> filename</span>
<span id="cb23-2"><a></a><span class="fu">tail</span> <span class="at">-n</span> 20 filename  <span class="co"># last 20 lines</span></span>
<span id="cb23-3"><a></a><span class="fu">tail</span> <span class="at">-F</span> filename <span class="co"># constantly read the file</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="wc" class="slide level2">
<h2>wc</h2>
<p>Often times we just want to count the number of something. For example, if we want to count the number of files/folders in the directory we can do:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb24-1"><a></a><span class="fu">ls</span> <span class="at">-l</span> <span class="kw">|</span> <span class="fu">wc</span> <span class="at">-l</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We’re first printing all files and folders in a list format (one per line), then passing (<sub>piping</sub>_) the result to <code>wc</code>, which with the <code>-l</code> line flag, is counting the number of lines. Therefore we get a count of the number of files and folders. Here is another example where we’re counting how many times the word bash appears in these lecture notes:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb25-1"><a></a><span class="fu">grep</span> <span class="at">-o</span> <span class="st">'bash'</span> lecture.org <span class="kw">|</span> <span class="fu">wc</span> <span class="at">-l</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="piping" class="slide level2">
<h2>piping</h2>
<p>The purpose of piping is to pass data around between commands. We have just seen how we can pass the output of, say, the <code>ls</code> command to the input of <code>wc</code>. This allows use to construct very sophisticated pipelines to do some quite complex things from the combination of very simple commands.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb26-1"><a></a><span class="fu">find</span> . <span class="at">-name</span> <span class="st">'*.txt'</span> <span class="at">-type</span> f <span class="at">-print0</span> <span class="kw">|</span> <span class="fu">xargs</span> <span class="at">-0</span> grep <span class="st">"something"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="overview" class="slide level2">
<h2>Overview</h2>
<p>In summary we have seen the following commands:</p>
<ul>
<li><code>ls</code> - List a directory</li>
<li><code>cd</code> - Change/move to a directory</li>
<li><code>mkdir</code> - Make a new directory</li>
<li><code>cat</code> - Concatenate files</li>
<li><code>cp</code> - Copy a file/directory</li>
<li><code>mv</code> - Move files/folders</li>
<li><code>rm</code> - Remove files and folders</li>
<li><code>pwd</code> - Display the current absolute path</li>
<li><code>find</code> - Find files</li>
<li><code>grep</code> - Find occurrences of a pattern in a file</li>
<li><code>less/head/tail</code> - Read a file</li>
<li><code>wc</code> - Count</li>
</ul>
</section></section>
<section>
<section id="shell-scripting" class="title-slide slide level1 center">
<h1>Shell Scripting</h1>

</section>
<section id="your-very-first-bash-script" class="slide level2">
<h2>Your Very first bash script</h2>
<p>Let’s start with the classic ‘Hello, World’ example. We’ll create a new file called ‘hello.sh’ and enter the following:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb27-1"><a></a><span class="co">#!/bin/bash</span></span>
<span id="cb27-2"><a></a></span>
<span id="cb27-3"><a></a><span class="bu">echo</span> <span class="st">"Hello, World!"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>First thing to notice is that the first line contains what we call a ‘shebang’ or ‘hashbang’. It tells Linux which shell interpreter will be used to run the script, in this case: /bin/bash</p>
<p>The next (non-empty) line in the file is <code>echo 'Hello, World'</code>. This is exactly the same as the other commands we’ve just seen.</p>
<p>Now that we’ve created and saved our bash script, we will want to run it. We have two alternative methods to run this script:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb28-1"><a></a><span class="fu">bash</span> hello.sh  <span class="co"># run the script via bash</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The second, requires that we have executable privileges for the script:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb29-1"><a></a><span class="fu">chmod</span> +x hello.sh  <span class="co"># add executable 'x' privileges</span></span>
<span id="cb29-2"><a></a><span class="ex">./hello.sh</span>  <span class="co"># execute it</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="variables" class="slide level2">
<h2>Variables</h2>
<p>The variables we create in our bash scripts are very much the same as the environment variables we’ve seen before. Take for example:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb30-1"><a></a><span class="co">#!/bin/bash</span></span>
<span id="cb30-2"><a></a><span class="va">AGE</span><span class="op">=</span><span class="st">"35"</span></span>
<span id="cb30-3"><a></a><span class="va">PERSON_NAME</span><span class="op">=</span><span class="st">"Jane"</span></span>
<span id="cb30-4"><a></a><span class="bu">echo</span> <span class="st">"</span><span class="va">$PERSON_NAME</span><span class="st"> is </span><span class="va">$AGE</span><span class="st"> years old"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We create a variable <code>AGE</code> with the <code>=</code> assignment operator. <strong>Note</strong> we don’t put spaces either side of the equals sign in bash. To refer to the variable, we use <code>$AGE</code>, using the <code>$</code> dollar sign.</p>
</section>
<section id="interpolation-in-bash-strings" class="slide level2">
<h2>Interpolation in bash strings</h2>
<p>You would have noticed in the previous example that we included the variable directly into the string we’re echoing out. This is something similar to what we’ve seen with f-strings in Python.</p>
<p>When we use double quotes: <code>"..."</code> in bash, the variable will be integrated into the resulting string. We can even call bash functions from directly inside the string:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb31-1"><a></a><span class="bu">echo</span> <span class="st">"I am logging in as: </span><span class="va">$(</span><span class="fu">who</span><span class="va">)</span><span class="st">"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="bash-strings-the-sharp-edges" class="slide level2">
<h2>Bash strings – the sharp edges</h2>
<p>You might be tempted to use a variable when generating a path:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb32-1"><a></a><span class="va">TRAIN_PROCESS</span><span class="op">=</span><span class="st">"training"</span></span>
<span id="cb32-2"><a></a><span class="va">TEST_PROCESS</span><span class="op">=</span><span class="st">"testing"</span></span>
<span id="cb32-3"><a></a></span>
<span id="cb32-4"><a></a><span class="fu">touch</span> <span class="st">"./data/</span><span class="va">$TRAIN_PROCESS_error</span><span class="st">.txt"</span></span>
<span id="cb32-5"><a></a><span class="fu">touch</span> <span class="st">"./data/</span><span class="va">$TEST_PROCESS_error</span><span class="st">.txt</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>But this will create an error as underscores can be part of the variable name, so bash will be looking for a variable named: <code>$TRAIN_PROCESS_error</code> which has never been created. To get around this, we can wrap our variable in curly braces:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb33-1"><a></a><span class="fu">touch</span> <span class="st">"./data/</span><span class="va">${TRAIN_PROCESS}</span><span class="st">_error.txt"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="stopping-interpolation-in-bash-strings" class="slide level2">
<h2>Stopping interpolation in bash strings</h2>
<p>We can also use single quotes for strings in bash. When we use these strings, the string itself is <u>not</u> interpreted, and thus it will ignore any variables or bash commands:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb34-1"><a></a><span class="bu">echo</span> <span class="st">'I am logging in as: $(who)'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="inputoutput" class="slide level2">
<h2>Input/Output</h2>
<p>If we want to read the input from keyboard into a variable, we use the read command:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb35-1"><a></a><span class="co">#!/bin/bash</span></span>
<span id="cb35-2"><a></a></span>
<span id="cb35-3"><a></a><span class="bu">echo</span> <span class="st">"Enter your name:"</span></span>
<span id="cb35-4"><a></a><span class="bu">read</span> <span class="va">NAME</span></span>
<span id="cb35-5"><a></a></span>
<span id="cb35-6"><a></a><span class="bu">echo</span> <span class="st">"Hello, </span><span class="va">$NAME</span><span class="st">"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>read</code> in this context will read in the input and create the variable with that value. As we’ve already seen, we can then output this value to the console using the echo command.</p>
</section>
<section id="booleans" class="slide level2">
<h2>Booleans</h2>
<p>Technically, bash does not have built in data types for true and false, but Linux has the commands true and false which we could use in place. The implementation of how these commands work is not important.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb36-1"><a></a><span class="va">FILE_EXISTS</span><span class="op">=</span>true</span>
<span id="cb36-2"><a></a></span>
<span id="cb36-3"><a></a><span class="cf">if</span> <span class="bu">[</span> <span class="st">"</span><span class="va">$FILE_EXISTS</span><span class="st">"</span> <span class="ot">=</span> true <span class="bu">]</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb36-4"><a></a><span class="bu">echo</span> <span class="st">"The file exists!"</span></span>
<span id="cb36-5"><a></a><span class="cf">fi</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="conditionals" class="slide level2">
<h2>Conditionals</h2>
<p>When we’re creating <code>if</code> expressions, we use the following syntax:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb37-1"><a></a><span class="cf">if</span> <span class="op">&lt;&lt;conditional&gt;&gt;</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb37-2"><a></a><span class="st">   # do something</span></span>
<span id="cb37-3"><a></a><span class="st">else</span></span>
<span id="cb37-4"><a></a><span class="st">   # do something else</span></span>
<span id="cb37-5"><a></a><span class="st">fi</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We can also use <code>elif</code></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb38-1"><a></a><span class="cf">if</span> <span class="op">&lt;&lt;conditional&gt;&gt;</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb38-2"><a></a><span class="st">   # do something</span></span>
<span id="cb38-3"><a></a><span class="st">elif &lt;&lt;conditional&gt;&gt;; then</span></span>
<span id="cb38-4"><a></a><span class="st">   # do something else</span></span>
<span id="cb38-5"><a></a><span class="st">else</span></span>
<span id="cb38-6"><a></a><span class="st">   # something else entirely</span></span>
<span id="cb38-7"><a></a><span class="st">fi</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Writing condition expressions can be a little more cumbersome than in Python. These can be many pain points for new bash programmers, take for example:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb39-1"><a></a><span class="va">FILE_EXISTS</span><span class="op">=</span>false</span>
<span id="cb39-2"><a></a></span>
<span id="cb39-3"><a></a><span class="cf">if</span> <span class="bu">[</span> <span class="va">$FILE_EXISTS</span> <span class="bu">]</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb39-4"><a></a><span class="bu">echo</span> <span class="st">"The file exists!"</span></span>
<span id="cb39-5"><a></a><span class="cf">fi</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This is because we have used the <code>[...]</code> single bracket syntax for the test. But there are others:</p>
<ul>
<li>No brackets: we could omit the brackets in which case it would run the false command not print the statement.</li>
<li>Single paranthesis <code>(...)</code> creates a sub-shell.</li>
<li>Double paranthesis <code>((...))</code> for arithmetic operation</li>
<li>Single square bracket <code>[...]</code> calls <code>test</code></li>
<li>Double square bracket <code>[[...]]</code></li>
</ul>
<p>What if we write:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb40-1"><a></a><span class="va">VAR_1</span><span class="op">=</span><span class="st">"Mr Foo Bar"</span></span>
<span id="cb40-2"><a></a><span class="va">VAR_2</span><span class="op">=</span><span class="st">"Mr Foo Bar"</span></span>
<span id="cb40-3"><a></a><span class="cf">if</span> <span class="bu">[</span> <span class="va">$VAR_1</span> <span class="ot">=</span> <span class="va">$VAR_2</span> <span class="bu">]</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb40-4"><a></a><span class="bu">echo</span> <span class="st">"They are the same"</span></span>
<span id="cb40-5"><a></a><span class="cf">fi</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We would get an error because <code>test</code> expands the arguments into:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb41-1"><a></a><span class="ex">Mr</span> Foo Bar = Mr Foo Bar</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>With the spaces included. To prevent this from happening, we have to wrap the variables in quotation marks.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb42-1"><a></a><span class="va">VAR_1</span><span class="op">=</span><span class="st">"Mr Foo Bar"</span></span>
<span id="cb42-2"><a></a><span class="va">VAR_2</span><span class="op">=</span><span class="st">"Mr Foo Bar"</span></span>
<span id="cb42-3"><a></a><span class="cf">if</span> <span class="bu">[</span> <span class="st">"</span><span class="va">$VAR_1</span><span class="st">"</span> <span class="ot">=</span> <span class="st">"</span><span class="va">$VAR_2</span><span class="st">"</span> <span class="bu">]</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb42-4"><a></a><span class="bu">echo</span> <span class="st">"They are the same"</span></span>
<span id="cb42-5"><a></a><span class="cf">fi</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If we use <code>[[</code> in if statement, then we can do more sophisticated things like pattern matching:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb43-1"><a></a><span class="va">FILENAME</span><span class="op">=</span><span class="st">"testing.png"</span></span>
<span id="cb43-2"><a></a><span class="cf">if</span> <span class="kw">[[</span> <span class="st">"</span><span class="va">$FILENAME</span><span class="st">"</span> <span class="ot">=</span> <span class="pp">*</span>.png <span class="kw">]];</span> <span class="cf">then</span></span>
<span id="cb43-3"><a></a><span class="bu">echo</span> <span class="st">"Its a png file"</span></span>
<span id="cb43-4"><a></a><span class="cf">fi</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="loops" class="slide level2">
<h2>Loops</h2>
<p>Like in Python, we can iterate in bash</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb44-1"><a></a><span class="cf">for</span> i <span class="kw">in</span> <span class="dt">{</span><span class="dv">1</span><span class="dt">..</span><span class="dv">10</span><span class="dt">}</span><span class="kw">;</span> <span class="cf">do</span></span>
<span id="cb44-2"><a></a><span class="bu">echo</span> <span class="va">$i</span></span>
<span id="cb44-3"><a></a><span class="cf">done</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This iterates with i starting at 1 upto 10 (inclusive). Or we could do:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb45-1"><a></a><span class="cf">for</span> <span class="kw">((</span> <span class="va">i</span><span class="op">=</span><span class="dv">1</span><span class="kw">;</span> <span class="va">i</span> <span class="op">&lt;=</span> <span class="dv">10</span><span class="kw">;</span> <span class="va">i</span><span class="op">++</span> <span class="kw">));</span> <span class="cf">do</span></span>
<span id="cb45-2"><a></a><span class="bu">echo</span> <span class="va">$i</span></span>
<span id="cb45-3"><a></a><span class="cf">done</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We can also iterate over a list of files/folders in a directory:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb46-1"><a></a><span class="cf">for</span> FILE <span class="kw">in</span> ./images/<span class="pp">*</span><span class="kw">;</span> <span class="cf">do</span></span>
<span id="cb46-2"><a></a><span class="bu">echo</span> <span class="va">$FILE</span></span>
<span id="cb46-3"><a></a><span class="cf">done</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Using the <code>while</code> form, we can continue looping until our conditional is false. For example, we could loop testing our internet connection, until its been established:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb47-1"><a></a><span class="cf">while</span> <span class="ot">! </span><span class="fu">ping</span> <span class="at">-c</span> 1 google.com<span class="kw">;</span> <span class="cf">do</span></span>
<span id="cb47-2"><a></a><span class="bu">echo</span> <span class="st">"No internet yet"</span></span>
<span id="cb47-3"><a></a><span class="fu">sleep</span> 1</span>
<span id="cb47-4"><a></a><span class="cf">done</span></span>
<span id="cb47-5"><a></a></span>
<span id="cb47-6"><a></a><span class="bu">echo</span> <span class="st">"Internet is available!"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="functions" class="slide level2">
<h2>Functions</h2>
<p>To create a function, we use the following syntax:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb48-1"><a></a><span class="fu">function_name()</span> <span class="kw">{</span></span>
<span id="cb48-2"><a></a><span class="co"># do something</span></span>
<span id="cb48-3"><a></a><span class="kw">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>And to call the function, you just need to use the function name:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb49-1"><a></a><span class="ex">function_name</span> <span class="co"># this called function name</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here is another example:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb50-1"><a></a><span class="fu">say_hello()</span> <span class="kw">{</span></span>
<span id="cb50-2"><a></a><span class="bu">echo</span> <span class="st">"Hello, </span><span class="va">$1</span><span class="st">"</span></span>
<span id="cb50-3"><a></a><span class="kw">}</span></span>
<span id="cb50-4"><a></a></span>
<span id="cb50-5"><a></a><span class="ex">say_hello</span> <span class="st">"Jane"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Notice that we didn’t need to include any argument list. We just used <code>$1</code> for the first argument passed to the function.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb51-1"><a></a><span class="fu">say_hello()</span> <span class="kw">{</span></span>
<span id="cb51-2"><a></a><span class="bu">echo</span> <span class="st">"</span><span class="va">$1</span><span class="st">, </span><span class="va">$2</span><span class="st">"</span></span>
<span id="cb51-3"><a></a><span class="kw">}</span></span>
<span id="cb51-4"><a></a></span>
<span id="cb51-5"><a></a><span class="ex">say_hello</span> <span class="st">"Hi"</span> <span class="st">"Jane"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Returning values is ‘interesting’ as, coming from other languages, you think could do something like this:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb52-1"><a></a><span class="fu">say_hello()</span> <span class="kw">{</span></span>
<span id="cb52-2"><a></a><span class="cf">return</span> <span class="st">"hello"</span></span>
<span id="cb52-3"><a></a><span class="kw">}</span></span>
<span id="cb52-4"><a></a><span class="va">RESULT</span><span class="op">=</span><span class="st">"</span><span class="va">$(</span><span class="ex">say_hello</span><span class="va">)</span><span class="st">"</span></span>
<span id="cb52-5"><a></a><span class="bu">echo</span> <span class="va">$RESULT</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This didn’t work like we expected, the value wasn’t returned and assigned to <code>RESULT</code>. So how do we return a value?</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb53-1"><a></a><span class="fu">say_hello()</span> <span class="kw">{</span></span>
<span id="cb53-2"><a></a><span class="bu">echo</span> <span class="st">"Hello"</span></span>
<span id="cb53-3"><a></a><span class="kw">}</span></span>
<span id="cb53-4"><a></a><span class="va">RESULT</span><span class="op">=</span><span class="st">"</span><span class="va">$(</span><span class="ex">say_hello</span><span class="va">)</span><span class="st">"</span></span>
<span id="cb53-5"><a></a><span class="bu">echo</span> <span class="st">"This is before the printing of result"</span></span>
<span id="cb53-6"><a></a><span class="bu">echo</span> <span class="va">$RESULT</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section></section>
<section>
<section id="high-performance-cluster" class="title-slide slide level1 center">
<h1>High Performance Cluster</h1>

</section>
<section id="how-to-login" class="slide level2">
<h2>How to login</h2>
<div class="sourceCode" id="cb54"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb54-1"><a></a><span class="fu">ssh</span> <span class="op">&lt;&lt;username&gt;&gt;</span>@sms-ext.lis-lab.fr</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Typing this command can become tiresome very quickly, especially after sending data back and forth. But we can make it a lot easier by updating our <code>~/.ssh/config</code> file to include something like:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb55-1"><a></a><span class="ex">Host</span> cluster</span>
<span id="cb55-2"><a></a> <span class="ex">HostName</span> sms-ext.lis-lab.fr</span>
<span id="cb55-3"><a></a> <span class="ex">User</span> <span class="op">&lt;&lt;username&gt;&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then to login to the cluster, we just need to type:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb56-1"><a></a><span class="fu">ssh</span> cluster</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>And we should be prompted for our password.</p>
</section>
<section id="how-to-login-1" class="slide level2">
<h2>How to login</h2>
<p>If you trust the machine your on, you can remove password authentication and move to key-based authentication:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb57-1"><a></a><span class="ex">ssh-copy-id</span> cluster</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>When we next login to the server, we shouldn’t be prompted for a password.</p>
</section>
<section id="how-to-copy-files-to-and-from-the-cluster" class="slide level2">
<h2>How to copy files to and from the cluster</h2>
<p>We have a number of options for transferring files to and from the cluster. Firstly, let’s look at the command <code>scp</code>. It takes two arguments, the first argument is the file you want to send, the second argument is the destination of the sent file.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb58-1"><a></a><span class="fu">scp</span> <span class="op">&lt;&lt;origin&gt;&gt;</span> <span class="op">&lt;&lt;destination&gt;&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Similar to commands like <code>cp</code>, scp by default only works for files, not folders. To send folders/directories, we use the <code>-r</code> flag just like <code>cp</code>.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb59-1"><a></a><span class="fu">scp</span> <span class="at">-r</span> <span class="op">&lt;&lt;origin_folder&gt;&gt;</span> <span class="op">&lt;&lt;destination_folder&gt;&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="copying-files-rsync" class="slide level2">
<h2>Copying files – rsync</h2>
<p>One of the downsides about <code>scp</code> is that it will copy every file you give it. Even if the file at the destination is exactly the same. What if we only want to copy files that need to be copied, i.e.&nbsp;that are outdated, thus saving time? For that, we can use <code>rsync</code>. Rsync will copy files from one source to a destination only if the destination needs to be updated. This can save a lot of time by skipping files that already exist at the destination:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb60-1"><a></a><span class="fu">rsync</span> <span class="op">&lt;&lt;source&gt;&gt;</span> <span class="op">&lt;&lt;destination&gt;&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section></section>
<section>
<section id="submitting-jobs" class="title-slide slide level1 center">
<h1>Submitting jobs</h1>

</section>
<section id="the-login--and-compute-nodes" class="slide level2">
<h2>The Login- and Compute Nodes</h2>
<p>When you login to the cluster, you are logging into the <em>login</em> node. <strong>Note</strong> that no computation should be run on this node. If you want to run scripts, you will have to submit a job to the compute nodes.</p>
<p>On the login node there is a system installed called ‘SLURM’. SLURM is a job scheduler program that receives your requests for executing scripts, it will queue them and assign them to available compute nodes.</p>
<p>We will take a look at how to request and manage jobs using the various commands that SLURM provides.</p>
</section>
<section id="how-to-launch-a-job-srun" class="slide level2">
<h2>How to launch a job – srun</h2>
<p>The first command we will look at it is <code>srun</code>. This command will run request a job for execution in ‘real-time’. By real-time, we mean that the shell will wait until the job has been submitted.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb61-1"><a></a><span class="ex">srun</span> <span class="op">&lt;&lt;compute</span> node options<span class="op">&gt;&gt;</span> <span class="op">&lt;&lt;command</span> to run<span class="op">&gt;&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Let’s take a look at an example where we want to run an interactive bash shell on the compute shell (similar to ssh’ing into the compute node).</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb62-1"><a></a><span class="ex">srun</span> <span class="at">--time</span><span class="op">=</span>00:10:00 <span class="at">--pty</span> bash <span class="at">-l</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This will request a job on any available compute node for 10 minutes. When a node becomes available, <code>bash</code> will execute, dropping you into the shell. You will notice that the shell prompt has changed from <code>sms</code> to the name of the node.</p>
</section>
<section id="salloc" class="slide level2">
<h2>salloc</h2>
<p>There is another method we can use to create an interactive job. We could use the <code>salloc</code> command to allocate resources for a task. After the resources have been allocated and our job is ready, we can <code>ssh</code> into the node with the allocated resources.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb63-1"><a></a><span class="ex">salloc</span> <span class="at">--time</span><span class="op">=</span>10:00:00 <span class="kw">&amp;</span></span>
<span id="cb63-2"><a></a><span class="fu">ssh</span> <span class="op">&lt;</span>name<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="options" class="slide level2">
<h2>options</h2>
<p>In the previous command, we used the <code>--time</code> option to specify how long the job will run for. But there are other options we can use to be more specific about the jobs we want to run.</p>
<p><code>--cpus-per-task</code> can be used to request more than one CPU to be allocated. This is especially helpful when we have a multithreaded process we want to run.</p>
<p><code>--mem</code> specifies how much memory should be allocated to the job. For example: <code>--mem=16G</code> tells SLURM to allocate 16 GB of memory.</p>
</section>
<section id="gpu-allocation" class="slide level2">
<h2>GPU allocation</h2>
<p>If we need to use a GPU, we need to use a few options. Firstly, we can specify that our job is on a compute node with GPU. There will usually be a group of nodes in a ‘GPU’ group or partition, and thus we can specify to use one of these partitions:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb64-1"><a></a><span class="ex">srun</span> <span class="at">--time</span><span class="op">=</span>00:10:00 <span class="at">--partiton</span><span class="op">=</span>gpu <span class="at">--pty</span> bash <span class="at">-l</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>But you will notice that you still do not have access to a GPU. You’re running on the GPU node, but you haven’t actually requested a GPU be allocated to your job. For that you will use <code>--gres</code>:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb65-1"><a></a><span class="ex">srun</span> <span class="at">--time</span><span class="op">=</span>00:10:00 <span class="at">--partition</span><span class="op">=</span>gpu <span class="at">--gres</span><span class="op">=</span>gpu:1 <span class="at">--pty</span> bash <span class="at">-l</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here we are requesting one GPU, but if we use <code>--gres:gpu:2</code> we are requesting 2 GPUs etc.</p>
<p>There are many different types of GPUs available, some older than others. If you wanted to allocate a job with a specific type of GPU you can use the <code>--constraint</code> flag:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb66-1"><a></a><span class="ex">srun</span> <span class="at">--time</span><span class="op">=</span>00:10:00 <span class="dt">\</span></span>
<span id="cb66-2"><a></a> <span class="at">--partition</span><span class="op">=</span>gpu <span class="dt">\</span></span>
<span id="cb66-3"><a></a> <span class="at">--gres</span><span class="op">=</span>gpu:1 <span class="dt">\</span></span>
<span id="cb66-4"><a></a> <span class="at">--constraint</span><span class="op">=</span><span class="st">'cuda61'</span> <span class="dt">\</span></span>
<span id="cb66-5"><a></a> <span class="at">--pty</span> bash <span class="at">-l</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This command requests that our job run on the GPU partition, with 1 GPU allocated that has the capability of running CUDA compute 61.</p>
<p>Or we can specify the type of GPU in the gres option:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb67-1"><a></a><span class="ex">srun</span> <span class="at">--time</span><span class="op">=</span>00:10:00 <span class="dt">\</span></span>
<span id="cb67-2"><a></a> <span class="at">--partition</span><span class="op">=</span>gpu <span class="dt">\</span></span>
<span id="cb67-3"><a></a> <span class="at">--gres</span><span class="op">=</span>gpu:2080:1 <span class="dt">\</span></span>
<span id="cb67-4"><a></a> <span class="at">--pty</span> bash <span class="at">-l</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="learning-more-about-nodes" class="slide level2">
<h2>Learning more about nodes</h2>
<p>To understand what each compute node has we can use the <code>scontrol</code> command.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb68-1"><a></a><span class="ex">scontrol</span> show nodes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Will list out all nodes and all capabilities of each node. Or just one node:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb69-1"><a></a><span class="ex">scontrol</span> show node lisnode2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="sbatch" class="slide level2">
<h2>sbatch</h2>
<p>It can be quite inconvenient to launch an interactive job to run some compute, and wait for the job to be allocated. If, instead, you have a long running experiment that you want to run without any intervention from you, you can use <code>sbatch</code>.</p>
<p>Sbatch will require us to write a small bash script that specifies how to run a job and what to do once its allocated.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb70-1"><a></a><span class="co">#!/bin/bash</span></span>
<span id="cb70-2"><a></a></span>
<span id="cb70-3"><a></a><span class="co">#SBATCH --time=00:01:00</span></span>
<span id="cb70-4"><a></a><span class="co">#SBATCH --job-name=my_new_job</span></span>
<span id="cb70-5"><a></a><span class="co">#SBATCH --output=my_new_job.out</span></span>
<span id="cb70-6"><a></a><span class="co">#SBATCH --error=my_new_job.err</span></span>
<span id="cb70-7"><a></a></span>
<span id="cb70-8"><a></a><span class="bu">echo</span> <span class="va">$HOSTNAME</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>And run it:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb71-1"><a></a><span class="ex">sbatch</span> my_job.sh</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Notice that instead of supplying options to sbatch, we can instead record them directly into the script using the <code>#SBATCH</code>. SLURM will examine this file, looking for lines starting with this comment, and infer that the rest of the line contains the options.</p>
<p>There are a few other options we’ve included that are very useful when running non-interactive jobs. Firstly, we’ve given the job a name (<code>my_new_job</code>). This is so we can different between many jobs that we might run at the same time. To list out the jobs we currently have running we use <code>squeue</code>.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb72-1"><a></a><span class="ex">squeue</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>By default, squeue will list all of the active jobs, even other peoples. To specify only your jobs user the <code>--user</code> option:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb73-1"><a></a><span class="ex">squeue</span> <span class="at">--user</span><span class="op">=</span>jay.morgan</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The other two options, <code>--output</code> and <code>--error</code> specify where the printed output and printed errors will be stored. Since the job is being run on a different node, by a non-interactive process, if you didn’t include these lines, you wouldn’t be able to see what was being printed by <code>echo</code> or by any other process such as <code>print</code> in Python.</p>
</section>
<section id="squeue" class="slide level2">
<h2>squeue</h2>
<p>When we list the jobs using <code>squeue</code> it will give us multiple columns of information, such as:</p>
<ul>
<li>JOBID – the referable id of the job.</li>
<li>PARTITION – the partition on which the job has been requested for.</li>
<li>NAME – the name of the job.</li>
<li>USER – the user who submitted the job.</li>
<li>ST – the status, is the job currently running, waiting, or exiting?</li>
<li>TIME – how long the job has been running for.</li>
<li>NODES – how many nodes have been allocated to the job.</li>
</ul>
</section>
<section id="scontrol" class="slide level2">
<h2>scontrol</h2>
<p><code>scontrol</code> allows us to modify an existing job. For example, let us say that we have a job which we need to extend the time limit. Given that we know the job id (we could use <code>squeue</code> to find this), we can ask SLURM to update the time limit using:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb74-1"><a></a><span class="ex">scontrol</span> update jobid=<span class="op">&lt;</span>job_id<span class="op">&gt;</span> TimeLimit=<span class="op">&lt;</span>new_timelimit<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="scancel" class="slide level2">
<h2>scancel</h2>
<p>Let’s say that we’ve submitted a job, but we’ve noticed that there was an error in the code, and want to stop the job. For that, we use <code>scancel</code> and specify the id of the job we wish to cancel:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb75-1"><a></a><span class="ex">scancel</span> 158590</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>After running this command, we should see, using <code>squeue</code>, that either the job is finishing, or that its disappeared from our list (meaning that its completely stopped).</p>
</section>
<section id="sacct" class="slide level2">
<h2>sacct</h2>
<p>If our job has finished, or exited and is no longer in <code>squeue</code>, we can use <code>sacct</code> to get a history of the jobs.</p>
<p><code>sacct</code> will list all of your jobs within some default window of time. If we want to change this window we can use the <code>--starttime</code> and <code>--endtime</code> options.</p>
<p>Valid time formats are:</p>
<ul>
<li>HH:MM[:SS][AM|PM]</li>
<li>MMDD[YY][-HH:MM[:SS]]</li>
<li>MM.DD[.YY][-HH:MM[:SS]]</li>
<li>MM/DD[/YY][-HH:MM[:SS]]</li>
<li>YYYY-MM-DD[THH:MM[:SS]]</li>
<li>today, midnight, noon, fika (3 PM), teatime (4 PM)</li>
<li>now[{+|-}count[seconds(default)|minutes|hours|days|weeks]]</li>
</ul>
</section>
<section id="job-task-arrays-motivation" class="slide level2">
<h2>Job Task Arrays – motivation</h2>
<p>Task arrays allow you to submit many jobs of the same type. Why might this be useful? Suppose you have a list of files that take a long time to process:</p>
<ul>
<li><code>file_0.txt</code></li>
<li><code>file_1.txt</code></li>
<li><code>file_2.txt</code></li>
</ul>
<p>Or you have some computation script, such as deep learning training script, that takes uses a hyperparameter which can be tuned to achieve different performance results:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb76-1"><a></a><span class="ex">python</span> train.py <span class="at">--learning-rate</span> 0.001</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Instead of a creating a sbatch script for each value of hyperparameter, or sequentially enumerating the values, you can use a job task array to spawn multiple jobs with slightly different values.</p>
</section>
<section id="job-task-arrays-how-to" class="slide level2">
<h2>Job Task Arrays – how to</h2>
<p>First, we will look at how to actually submit an array of tasks. To create an task array, you will need to add the <code>--array</code> options to your sbatch script:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb77-1"><a></a><span class="co">#!/bin/bash</span></span>
<span id="cb77-2"><a></a></span>
<span id="cb77-3"><a></a><span class="co">#SBATCH --job-name=my_task_array</span></span>
<span id="cb77-4"><a></a><span class="co">#SBATCH --array=1-5</span></span>
<span id="cb77-5"><a></a></span>
<span id="cb77-6"><a></a><span class="ex">...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here we are creating an array of tasks numbered from 1-5. When you submit this script, you will see five tasks submitted to the queue.</p>
<p>Now that we know how to create an array of tasks, we will want to do something useful with it. When you create an array, each individual task will have a unique variable called <code>SLURM_ARRAY_TASK_ID</code>. So for example, if we launch an array of 5 tasks, the first task will have the value <code>1</code>. Why is this useful? Well, we can use this variable to alter the program slightly. Take for example our list of files we need to process:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb78-1"><a></a><span class="co">#!/bin/bash</span></span>
<span id="cb78-2"><a></a><span class="co">#SBATCH --job-name=my_task_array</span></span>
<span id="cb78-3"><a></a><span class="co">#SBATCH --array=0-4</span></span>
<span id="cb78-4"><a></a><span class="co">#SBATCH --time=00:10:00</span></span>
<span id="cb78-5"><a></a></span>
<span id="cb78-6"><a></a><span class="va">FILENAME</span><span class="op">=</span><span class="st">"file_</span><span class="va">${SLURM_ARRAY_TASK_ID}</span><span class="st">.txt"</span></span>
<span id="cb78-7"><a></a><span class="ex">python</span> process.py <span class="va">$FILENAME</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This will create a new bash variable called <code>FILENAME</code> by concatenating <code>file_</code> the current task’s (i.e.&nbsp;0, for the first task, 1 for the second task, etc) and <code>.txt</code>.</p>
<p>If we run the previous example, we will see that we have five jobs named exactly the same thing <code>my_task_array</code>. This is okay, but we can be a little bit more clear as to which task is running, i.e.&nbsp;which task is processing which file?</p>
<p>We can use some special variables in our bash script to make this more clear. These are <code>%A</code> that is the main job id, and <code>%a</code> that is the task array id.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb79-1"><a></a><span class="co">#!/bin/bash</span></span>
<span id="cb79-2"><a></a></span>
<span id="cb79-3"><a></a><span class="co">#SBATCH --error=my_task_array.%A_%a.out</span></span>
<span id="cb79-4"><a></a><span class="co">#SBATCH --output=my_task_array.%A_%a.out</span></span>
<span id="cb79-5"><a></a><span class="ex">...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now, every task in our array will have a slightly different name because of the <code>%a</code> and therefore we will be able to determine which job is processing which file.</p>
<p>Let’s move on to the second example, where we have a Deep Learning training program and we want to try different parameters. In this case, we can again use a task array.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb80-1"><a></a><span class="co">#!/bin/bash</span></span>
<span id="cb80-2"><a></a></span>
<span id="cb80-3"><a></a><span class="co">#SBATCH --array=1-10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We could either pass the <code>SLURM_ARRAY_TASK_ID</code> as a command line argument to the script:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb81-1"><a></a><span class="ex">python</span> training.py <span class="at">--learning-rate</span> <span class="va">$SLURM_ARRAY_TASK_ID</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>But in this case, we could have to properly calculate the correct learning rate from the <code>SLURM_ARRAY_TASK_ID</code> value (remember that in my sbatch script I set <code>--array=1-5</code>). But bash only performs integer arithmetic, therefore we will need to calculate the correct learning rate in something else.</p>
<p>Instead of passing the learning rate via a command line argument. We can get the value directly from our python script and calculate the value.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb82-1"><a></a><span class="im">import</span> os</span>
<span id="cb82-2"><a></a></span>
<span id="cb82-3"><a></a>task_id <span class="op">=</span> <span class="bu">int</span>(os.environ[<span class="st">"SLURM_ARRAY_TASK_ID"</span>])</span>
<span id="cb82-4"><a></a>learning_rate <span class="op">=</span> task_id <span class="op">/</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here we are using the builtin <code>os</code> module in Python, getting the environment variable from the dictionary <code>environ</code> and parsing the value as an integer. Then we can calculate the appropriate learning rate using this value. So for example, if <code>SLURM_ARRAY_TASK_ID</code> is set to 1. Our learning rate would be 0.01 for this task.</p>
<p>If you’re creating a job task array, you may want to create hundreds of jobs. And of course, you don’t want to use up the entire cluster leaving no resources for anybody else! Therefore, you will only want a maximum number of tasks to run at any one time.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb83-1"><a></a><span class="co">#!/bin/bash</span></span>
<span id="cb83-2"><a></a></span>
<span id="cb83-3"><a></a><span class="co">#SBATCH --array=1-100%5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This will create a job task array of 100 jobs numbered from 1 to 100. But we have added an additional argument <code>%5</code> which means that only 5 jobs can run at any one time for this task array. If you have five tasks running, the other 95 tasks will wait.</p>
<p>If, at any point, you want to change how many jobs can run simultaineously, you can update this ‘throttle’ value using <code>scontrol</code>:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb84-1"><a></a><span class="ex">scontrol</span> update ArrayTaskThrottle=<span class="op">&lt;</span>count<span class="op">&gt;</span> JobId=<span class="op">&lt;</span>jobID<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>So if we’ve already launched a job task array with the job id of <code>50602</code> that has a throttle value of 5 (only 5 tasks will run at once), we can change it to 10 using:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb85-1"><a></a><span class="ex">scontrol</span> update ArrayTaskThrottle=10 JobId=50602</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section></section>
<section>
<section id="a-guided-walk-through" class="title-slide slide level1 center">
<h1>A guided walk through</h1>

</section>
<section id="a-guided-walk-through-environment" class="slide level2">
<h2>A guided walk through – environment</h2>
<p>In this section we’re going to give an example walk through of working with the HPC cluster. In this example, we’re going to write our scripts locally, including the slurm submission script, and when they’re ready, we’ll send them to the cluster to perform the actual computation.</p>
<p>Let’s imagine we’re starting a new project, and are programming our scripts in Python. Now is a good time to create a new conda environment to install our packages we’re going to use for our research. We’ll create this environment with (replacing <code>&lt;env-name&gt;</code> with whatever we want to call this environment):</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb86-1"><a></a><span class="ex">conda</span> create <span class="at">--name</span> <span class="op">&lt;</span>env-name<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>and then activate it:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb87-1"><a></a><span class="ex">conda</span> activate <span class="op">&lt;</span>env-name<span class="op">&gt;</span></span>
<span id="cb87-2"><a></a><span class="ex">conda</span> install python=3.9</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="writing-our-scripts" class="slide level2">
<h2>Writing our scripts</h2>
<p>Let us also image we’ve just wrote the following script to create a lorenz attractor: <a href="https://pageperso.lis-lab.fr/jay.morgan/resources/2021-programming-level-up/lectures/week-5/lorenz.py">lorenz.py</a></p>
<p>The specific implementation of this script is not particularly important for this walk through. Just know that we’re importing a few packages such as numpy and matplotlib. Then, we’re performing some computation, and saving the results to analyse later. As this script uses external libraries, we need to install them:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb88-1"><a></a><span class="ex">conda</span> install numpy matplotlib</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="writing-our-job-submission-script" class="slide level2">
<h2>Writing our job submission script</h2>
<p>Since we want our calculations to be performed on the cluster, we will need to also write a job submission script (let’s call this <code>submit-job.sh</code>) in bash to pass to SLURM.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb89-1"><a></a><span class="co">#!/bin/bash</span></span>
<span id="cb89-2"><a></a></span>
<span id="cb89-3"><a></a><span class="co">#SBATCH --job-name=lorenz_attractor</span></span>
<span id="cb89-4"><a></a><span class="co">#SBATCH --output=lorenz_attractor.log</span></span>
<span id="cb89-5"><a></a><span class="co">#SBATCH --error=lorenz_attractor.log</span></span>
<span id="cb89-6"><a></a><span class="co">#SBATCH --time=00:10:00</span></span>
<span id="cb89-7"><a></a></span>
<span id="cb89-8"><a></a><span class="ex">python</span> lorenz.py</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="replicating-our-environment-on-the-cluster" class="slide level2">
<h2>Replicating our environment on the cluster</h2>
<p>As we’ve installed external packages in our local development environment, we will want to ensure that when we run the calculations on the cluster, it will be using the same versions of packages. Conda makes this a lot easier. First, we export our environment to a recipe file:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb90-1"><a></a><span class="ex">conda</span> env export <span class="at">--no-builds</span> <span class="op">&gt;</span> environment.yml</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="sending-our-scripts-to-the-cluster" class="slide level2">
<h2>Sending our scripts to the cluster</h2>
<p>All of our scripts are ready! We can now transfer them from our personal computer, to the cluster. The files we need to transfer are:</p>
<ul>
<li><code>lorenz.py</code></li>
<li><code>environment.yml</code></li>
<li><code>submit-job.sh</code></li>
</ul>
<p>While we can send a folder (and the containing files), let’s send them one at a time:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb91-1"><a></a><span class="fu">scp</span> lorenz.py <span class="op">&lt;</span>hostname<span class="op">&gt;</span>:<span class="op">&lt;</span>destination-path<span class="op">&gt;</span></span>
<span id="cb91-2"><a></a><span class="fu">scp</span> environment.yml <span class="op">&lt;</span>hostname<span class="op">&gt;</span>:<span class="op">&lt;</span>destination-path<span class="op">&gt;</span></span>
<span id="cb91-3"><a></a><span class="fu">scp</span> submit-job.sh <span class="op">&lt;</span>hostname<span class="op">&gt;</span>:<span class="op">&lt;</span>destination-path<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>where <code>&lt;hostname&gt;</code> is the hostname/IP address that you’ve used to connect to the login node on the cluster before. <code>&lt;destination-path&gt;</code> is the path to where you want to save the files.</p>
</section>
<section id="logging-into-the-cluster" class="slide level2">
<h2>Logging into the cluster</h2>
<p>Now that our files are on the cluster, we can login:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb92-1"><a></a><span class="fu">ssh</span> <span class="op">&lt;</span>username<span class="op">&gt;</span>@<span class="op">&lt;</span>hostname<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>At which point, we’ve logged into the login node, and then we need to change directory to where we saved the files:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb93-1"><a></a><span class="bu">cd</span> <span class="op">&lt;</span>destination-path<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="re-creating-our-development-environment" class="slide level2">
<h2>Re-creating our development environment</h2>
<p>Now that we’re in the same folder as our scripts, we’re almost ready to submit our job. First, we need to recreate our development environment from our <code>environment.yml</code> file.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb94-1"><a></a><span class="ex">conda</span> env create <span class="at">-f</span> environment.yml</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>And activate our newly created environment:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb95-1"><a></a><span class="ex">conda</span> activate <span class="op">&lt;</span>env-name<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="submitting-our-job" class="slide level2">
<h2>Submitting our job</h2>
<p>Now we can submit our job:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb96-1"><a></a><span class="ex">sbatch</span> submit-job.sh</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We can check the progress of our job with <code>squeue</code>, or its already completed, look at the job history with <code>sacct</code>.</p>
</section>
<section id="downloading-the-results" class="slide level2">
<h2>Downloading the results</h2>
<p>If our job runs successfully, a <code>data.pkl</code> file will be created. Back on our local computers, we will need to run the following to download it:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb97-1"><a></a><span class="fu">scp</span> <span class="op">&lt;</span>hostname<span class="op">&gt;</span>:<span class="op">&lt;</span>destination-path<span class="op">&gt;</span>/data.pkl ./</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This will download the file into the current directory.</p>
</section>
<section id="analysing-the-results" class="slide level2">
<h2>Analysing the results</h2>
<p>With the <code>data.pkl</code> file downloaded, we can visualise the results using <code>plot_lorenz.py</code>: <a href="https://pageperso.lis-lab.fr/jay.morgan/resources/2021-programming-level-up/lectures/week-5/plot-lorenz.py" class="uri">https://pageperso.lis-lab.fr/jay.morgan/resources/2021-programming-level-up/lectures/week-5/plot-lorenz.py</a></p>
<p>If everything has been run correctly, you should see a plot of the lorenz attractor.</p>
</section>
<section id="useful-features-x11-forwarding" class="slide level2">
<h2>Useful features – X11 Forwarding</h2>
<p>If we’re performing analysis interactively using the cluster, we’ll often want to visualise the results, using matplotlib for example. To <em>see</em> our plots display like they would on our local machine when we call <code>plt.plot</code> or <code>plt.show()</code>, we will need to ensure that we’re using something called <code>X11 Forwarding</code>. To enable <code>X11 Forwarding</code>, we use the <code>-X</code> option when <code>ssh</code>‘ing into the cluster and compute nodes (i.e.&nbsp;it will need to be enabled on every ’hop’ so to speak).</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb98-1"><a></a><span class="fu">ssh</span> <span class="at">-X</span> <span class="op">&lt;&lt;remote-host&gt;&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If want to enable it by default, we can enable it in our <code>ssh</code> config file:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb99-1"><a></a><span class="ex">Host</span> cluster</span>
<span id="cb99-2"><a></a> <span class="ex">HostName</span> sms-ext.lis-lab.fr</span>
<span id="cb99-3"><a></a> <span class="ex">FowardX11</span> yes</span>
<span id="cb99-4"><a></a> <span class="ex">User</span> <span class="op">&lt;&lt;username&gt;&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>After setting up <code>X11 Forwarding</code> correctly, and when logged into the remote host, we should be able to echo a variable called <code>$DISPLAY</code>.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb100-1"><a></a><span class="bu">echo</span> <span class="va">$DISPLAY</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If <code>$DISPLAY</code> has a value, we know that X11 Forwarding has been setup correctly, and we’re ready to do some plotting!</p>
</section>
<section id="useful-features-jupyter-notebooks" class="slide level2">
<h2>Useful features – Jupyter Notebooks</h2>
<p>We’ve talked about how good jupyter notebooks are for performing analysis and exploration. But often times, we will need a lot of compute resources (more than our local computers can handle) to do this analysis. This is where using jupyter notebook on the supercomputers comes in handy. However, it is not as simple as starting the jupyter notebook server and opening up your web browser. First, we will need to setup a ‘reverse ssh tunnel’.</p>
<p>In a nut-shell, a reverse ssh tunnel allows you to redirect data on a remote port to a local port.</p>
<p>Therefore, we can, using a reverse ssh tunnel, start a jupyter notebook on the supercomputer and access it using the web browser on our local computer!</p>
<p>To begin, we can create an interactive job on the cluster:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb101-1"><a></a><span class="ex">srun</span> <span class="at">--time</span><span class="op">=</span>01:00:00 <span class="at">--pty</span> bash <span class="at">-l</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>And start our jupyter notebook, specifying a port that will not be in use:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb102-1"><a></a><span class="ex">jupyter</span> notebook <span class="at">--port</span> 30333</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>With our notebook server now started on the 30333 port, we will want to create an ssh tunnel from our local computer, to the cluster’s login node, and then a tunnel from the login node to the specific compute node where the job is running:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb103-1"><a></a><span class="fu">ssh</span> <span class="at">-L</span> 30333:localhost:30333 <span class="op">&lt;&lt;cluster-login-node&gt;&gt;</span> ssh <span class="at">-L</span> 30333:localhost:30333 <span class="op">&lt;&lt;cluster-compute-node&gt;&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If everything goes well, we should now be able to open up our web browser, navigate to <code>localhost:30333</code> and see our jupyter notebooks.</p>

<div class="quarto-auto-generated-content">
<div class="footer footer-default">

</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("https:\/\/morganwastaken\.com");
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>